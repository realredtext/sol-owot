 alert("This is the demolition script. Use CTRL+1 to place a bomb and CTRL+2 to detonate the bombs. The next fuse is lit after the current bomb has exploded. Bombs will cause other bombs to explode, even if they weren't placed by the demolition script. You can only light the fuse of bombs that were placed while the script was active."); var demoArray = []; var fuseTime = 1000; function getRandom(min, max) { min = Math.ceil(min); max = Math.floor(max); return Math.floor(Math.random() * (max - min + 1) + min); }; function placeBomb () { if (demoArray.includes(cursorCoords) == false) { demoArray.push(cursorCoords); writeChar(String.fromCodePoint(128163),true) } }; function detonateBombs() { if (demoArray.length != 0) { var bombCoords = demoArray[0]; demoArray.splice(0,1); if (getCharInfo(...bombCoords).char == String.fromCodePoint(128163)) { explosion(...bombCoords); }; setTimeout(()=>{detonateBombs()},fuseTime) } }; function explosion(tileX,tileY,charX,charY) { writeCharTo(String.fromCodePoint(128165),0,tileX,tileY,charX,charY); var wholeX = (tileX * 16) + charX; var wholeY = (tileY * 8) + charY; var randomWholeX; var randomWholeY; var editTileX; var editTileY; var editCharX; var editCharY; var editArrayBomb = []; for (I=0;I<10;I++) { randomWholeX = (getRandom(-12,12) + wholeX); randomWholeY = (getRandom(-6,6) + wholeY); if (getCharInfoXY(randomWholeX,randomWholeY).char == String.fromCodePoint(128163)) { editTileX = Math.floor(randomWholeX / 16); editTileY = Math.floor(randomWholeY / 8); editCharX = randomWholeX % 16; editCharY = randomWholeY % 8; window.setTimeout(()=>{explosion(editTileX,editTileY,editCharX,editCharY)},100); }; writeCharToXY(String.fromCodePoint(32),0,randomWholeX,randomWholeY); for (H=0;H<7;H++) { randomWholeX = (getRandom(-10,10) + wholeX); randomWholeY = (getRandom(-5,5) + wholeY); if (getCharInfoXY(randomWholeX,randomWholeY).char == String.fromCodePoint(128163)) { editTileX = Math.floor(randomWholeX / 16); editTileY = Math.floor(randomWholeY / 8); editCharX = randomWholeX % 16; editCharY = randomWholeY % 8; window.setTimeout(()=>{explosion(editTileX,editTileY,editCharX,editCharY)},100); }; writeCharToXY(String.fromCodePoint(32),0,randomWholeX,randomWholeY); for (J=0;J<5;J++) { randomWholeX = (getRandom(-8,8) + wholeX); randomWholeY = (getRandom(-4,4) + wholeY); if (getCharInfoXY(randomWholeX,randomWholeY).char == String.fromCodePoint(128163)) { editTileX = Math.floor(randomWholeX / 16); editTileY = Math.floor(randomWholeY / 8); editCharX = randomWholeX % 16; editCharY = randomWholeY % 8; window.setTimeout(()=>{explosion(editTileX,editTileY,editCharX,editCharY)},100); }; writeCharToXY(String.fromCodePoint(32),0,randomWholeX,randomWholeY); } } } writeCharTo(String.fromCodePoint(128165),0,tileX,tileY,charX,charY); window.setTimeout(()=>{writeCharTo(" ",0,tileX,tileY,charX,charY)},1000); }; menu.addOption("Set Fuse Time", function() {fuseTime = Number(prompt("Time in seconds for the fuse.",1))*1000}); document.addEventListener("keydown", demoKeys); function demoKeys(e) { if(checkKeyPress(e, "SHIFT")) { placeBomb(); }; if(checkKeyPress(e, "SHIFT+ALT")) { setTimeout(()=>{detonateBombs()},fuseTime); } }//by scripter from /seinfeld
